# 进程管理

程序: 是下载或者编写的静态的代码,只会占用磁盘空间,并不会占用内存

进程: 是运行中的动态的代码 占用 内存 CPU等等

在Linux中所有的程序,设备等都拥有自己的编号如 UUID UID GID等等,进程使用的是**PID 编号**

进程之间也分为 **父进程/子进程** 在父进程程序启动或关闭时,都会连带启动或关闭子进程

**systemd** 是所有进程的父进程,或者可以说是所有进程的**根** 上帝进程

**孤儿进程** 是父进程关闭时,因为一些错误无法关闭的子进程,会导致该子进程疯狂的占用资源

**僵尸进程 **在进程中也拥有一些无用的,或是损坏的进程,这时程序无法意识到自己已经故障或卡死就需要我们人工来进程杀除

---

```html
pstree [-选项] [PID或用户名]
```

选项列举

- -a  显示出完整的命令行
- -p  显示出所有的PID进程号

---

```
ps [选项] ....
```

选项列举

- aux    显示当前终端的所有进程(a) 当前用户在所有终端下的进程(x) 以用户格式输出(u)是三个选项连用

- -elf      显示系统内所有的进程(-e)  以长格式输出(-i)信息  包括最完整的进程信息(-f)
      #会有PPID的一列是父进程的PID

- ```
  ps -aux --sort=-%cpu | head -n 10   #按CPU使用率降序排序，并显示前10个进程的信息
  ```

- ```
  ps -aux --sort=-%mem | head -n 10   #按内存使用率降序排序，并显示前10个进程的信息
  ```

---

```
top [-d 刷新秒数] [-U 用户名]
在top排列中使用
P  进行CPU使用率的排序
M  进行Meu使用率的排序
G  进行Gpu使用率的排序
```

top是一个交互式的工具,常用来**查看系统的资源使用率和进程**

---

``` 
pgrep [选项] 查询条件
```

选项列举

- -l  输出进程名,默认pgrep只会输出PID
- -U 指定查看用户的进程
- -x  精确匹配完整的进程名

---

### 进程的前后台调用

前台启动: 正常的输入命令  命令运行期间占用当前的shell终端

后台启动: 在命令行末尾添加"&"符号,不占用当前终端,在后台默默运行

```
例如 cp /dev/sr0 /mkdir &
```

Ctrl + z 组合键 : 挂起当前的进程(暂停并且转入后台)

```
jobs  [-l] #查看后台任务列表
-l 		   #查看后台任务的进程号PID
#编号   状态    命令
```

```
fg 后台进程编号    #将后台的任务转到前台执行
```

```
bg 后台进程编号	 #激活被挂起的进程
```

---

### 杀死进程

杀死进程的不同方法

 	- Ctrl + c  组合键   中断当前的命令程序

```
kill [-9] PID  或  kill [-9] %后台任务编号
```

```
killall [-9] 进程名   #杀死该进程名
```

```
pkill  查找条件   #不建议使用
```

强制踢出一个用户(杀死该用户开启的所有进程)      **`killall -9 -u 用户名`**

------